---
title: "역정규화"
date: 2023-07-05T23:35:07+09:00
categories: ["Diary"]
---
## Done List
- None

## To Do List
- None

## Memo
오늘 DB 설계를 하면서 고민했던 영역이 있다.

Company User Card 이렇게 3가지 경우가 있다.

해당 table은 1:N:M 관계를 가진다.

예를 들어, 하나카드를 이용하는 나는 모두의 쇼핑 카드를 들고 있다.

"하나카드" "나(MINGKYME)" "모두의 쇼핑"

해당 3가지 경우에 Card라는 테이블에 하나카드라는 걸 넣어야 할까? (단, 1개의 카드사만 사용한다는 전제)

이러한 경우에 DB 입장에서는 Card 테이블에서는 Company에 대한 정보가 있을 필요가 없다. (참조해서 확인 가능.)

하지만 여러가지 이유로 인해 Card 테이블에 Company에 대한 정보를 넣는 경우가 있다.

이걸 역정규화라고 한다.

그렇다면 역정규화를 해야하는 기준이 뭘까?

나는 활용도가 높아 query에 성능 개선이 필요할 정도인지 여부가 그 답변이라고 생각한다.

많은 요청으로 인해, 또는 많은 row로 인해 성능이 나오지 않는다면 역정규화를 고려해볼만 하다.

나의 케이스엔 그렇게 필수적인 요청이 아니라고 판단하여 진행하진 않았다.

하지만 역정규화에 대해 고민하는 시간을 가졌다.