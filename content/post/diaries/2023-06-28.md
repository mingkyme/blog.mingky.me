---
title: "HTTP 통신할 때, Status는 언제 결정 될까?"
date: 2023-06-28T23:14:34+09:00
categories: ["Diary"]
---
## Done List
- None

## To Do List
- None

## Memo
오늘 회사 업무 중에 timeout이 제대로 동작하지 않는다는 리포팅을 듣고 확인을 하게 됐다.

timeout을 만들기 위해 임의로 용량이 큰 파일을 만들었다.

그리곤 테스트를 해보니 timeout이 나오지 않았다. 저번 패치에 문제가 있는건가 확인을 해보았다.

확인 결과 timeout을 지정한 이유는 origin 서버에서 응답을 주지 않으면 무한정 wait 하는 현상을 방지하기 위해서 만들었던 조건이기 때문에

origin 서버의 응답이 늦게 와야한다.

하지만 이번의 경우엔 TCP 세션은 맺어졌고, body를 계속해서 보내는 중이기에 timeout으로 지정되지 않았다.

이전까지는 모든 body까지 다운로드를 끝내고 나서 해석을 할 것으로 생각했지만

실제로는 header를 먼저 다운로드하고 body는 계속해서 다운로드 한다는 걸 알게 됐다.
