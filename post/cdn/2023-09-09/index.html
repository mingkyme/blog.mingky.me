<!doctype html><html class="not-ready text-sm lg:text-base" style=--bg:#faf6f1 lang=ko><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>무효화 [Purge] 구현 방법론 - MINGKYME 블로그</title><meta name=theme-color><meta name=description content="Purge 종류 Purge는 2가지 종류가 있다.
Hard Purge 캐시 파일을 강제로 삭제하여, Cache 자체를 없애버린다. Soft Purge Cache 의 TTL을 0으로 조정한다. 만료된 것으로 취급하여, Revalidate 또는 Expired 로 나온다. 지금까지 말한 방법은 직접 파일을 수정하거나 삭제하는 방식이므로, wildcard purge가 불가능하다.
하지만, 대부분 CDN 서비스는 wildcard로 purge를 진행한다.
어떻게 처리하는 걸까?
메모리 DB를 따로 둬서 접속하는 URL이 rule에 맞다면 캐시 여부와 상관 없이 bypass 하는 구조도 가능하다.
단, 이렇게 구현 시, 요청 시간에 대한 정보도 같이 작성하여 1번이라도 renew가 된 정보에 대해서는 여러번 bypass가 되지 않게 해야한다."><meta name=author content="MINGKYME"><link rel="preload stylesheet" as=style href=https://blog.mingky.me/main.min.css><script defer src=https://blog.mingky.me/highlight.min.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=preload as=image href=https://blog.mingky.me/theme.png><link rel=preload as=image href="https://www.gravatar.com/avatar/dd549fcc49ccfe7970c3f796850bccf7?s=160&amp;d=identicon"><link rel=preload as=image href=https://blog.mingky.me/github.svg><link rel=preload as=image href=https://blog.mingky.me/instagram.svg><link rel=icon href=https://blog.mingky.me/favicon.ico><link rel=apple-touch-icon href=https://blog.mingky.me/apple-touch-icon.png><meta name=generator content="Hugo 0.113.0"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-JXMPBB9GZR","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JXMPBB9GZR"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-JXMPBB9GZR",{anonymize_ip:!1})}</script><meta property="og:title" content="무효화 [Purge] 구현 방법론"><meta property="og:description" content="Purge 종류 Purge는 2가지 종류가 있다.
Hard Purge 캐시 파일을 강제로 삭제하여, Cache 자체를 없애버린다. Soft Purge Cache 의 TTL을 0으로 조정한다. 만료된 것으로 취급하여, Revalidate 또는 Expired 로 나온다. 지금까지 말한 방법은 직접 파일을 수정하거나 삭제하는 방식이므로, wildcard purge가 불가능하다.
하지만, 대부분 CDN 서비스는 wildcard로 purge를 진행한다.
어떻게 처리하는 걸까?
메모리 DB를 따로 둬서 접속하는 URL이 rule에 맞다면 캐시 여부와 상관 없이 bypass 하는 구조도 가능하다.
단, 이렇게 구현 시, 요청 시간에 대한 정보도 같이 작성하여 1번이라도 renew가 된 정보에 대해서는 여러번 bypass가 되지 않게 해야한다."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.mingky.me/post/cdn/2023-09-09/"><meta property="article:section" content="post"><meta property="article:published_time" content="2023-09-09T05:56:15+00:00"><meta property="article:modified_time" content="2023-09-09T05:56:15+00:00"><meta itemprop=name content="무효화 [Purge] 구현 방법론"><meta itemprop=description content="Purge 종류 Purge는 2가지 종류가 있다.
Hard Purge 캐시 파일을 강제로 삭제하여, Cache 자체를 없애버린다. Soft Purge Cache 의 TTL을 0으로 조정한다. 만료된 것으로 취급하여, Revalidate 또는 Expired 로 나온다. 지금까지 말한 방법은 직접 파일을 수정하거나 삭제하는 방식이므로, wildcard purge가 불가능하다.
하지만, 대부분 CDN 서비스는 wildcard로 purge를 진행한다.
어떻게 처리하는 걸까?
메모리 DB를 따로 둬서 접속하는 URL이 rule에 맞다면 캐시 여부와 상관 없이 bypass 하는 구조도 가능하다.
단, 이렇게 구현 시, 요청 시간에 대한 정보도 같이 작성하여 1번이라도 renew가 된 정보에 대해서는 여러번 bypass가 되지 않게 해야한다."><meta itemprop=datePublished content="2023-09-09T05:56:15+00:00"><meta itemprop=dateModified content="2023-09-09T05:56:15+00:00"><meta itemprop=wordCount content="87"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="무효화 [Purge] 구현 방법론"><meta name=twitter:description content="Purge 종류 Purge는 2가지 종류가 있다.
Hard Purge 캐시 파일을 강제로 삭제하여, Cache 자체를 없애버린다. Soft Purge Cache 의 TTL을 0으로 조정한다. 만료된 것으로 취급하여, Revalidate 또는 Expired 로 나온다. 지금까지 말한 방법은 직접 파일을 수정하거나 삭제하는 방식이므로, wildcard purge가 불가능하다.
하지만, 대부분 CDN 서비스는 wildcard로 purge를 진행한다.
어떻게 처리하는 걸까?
메모리 DB를 따로 둬서 접속하는 URL이 rule에 맞다면 캐시 여부와 상관 없이 bypass 하는 구조도 가능하다.
단, 이렇게 구현 시, 요청 시간에 대한 정보도 같이 작성하여 1번이라도 renew가 된 정보에 대해서는 여러번 bypass가 되지 않게 해야한다."><script>(function(){var t,e=window;if(e.ChannelIO)return e.console.error("ChannelIO script included twice.");t=function(){t.c(arguments)},t.q=[],t.c=function(e){t.q.push(e)},e.ChannelIO=t;function n(){if(e.ChannelIOInitialized)return;e.ChannelIOInitialized=!0;var n,t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://cdn.channel.io/plugin/ch-plugin-web.js",n=document.getElementsByTagName("script")[0],n.parentNode&&n.parentNode.insertBefore(t,n)}document.readyState==="complete"?n():(e.addEventListener("DOMContentLoaded",n),e.addEventListener("load",n))})(),ChannelIO("boot",{pluginKey:"255599eb-3a0f-411d-8537-e5ecb986b3bb"})</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5510947922469629" crossorigin=anonymous></script></head><body class="text-black duration-200 ease-out dark:text-white"><header class="mx-auto flex h-[5rem] max-w-3xl px-8 lg:justify-center"><div class="relative z-50 mr-auto flex items-center"><a class="-translate-x-[1px] -translate-y-[1px] text-2xl font-semibold" href=https://blog.mingky.me/>MINGKYME 블로그</a><div class="btn-dark text-[0] ml-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.svg)_left_center/cover_no-repeat] dark:invert dark:[background-position:right]" role=button aria-label=Dark></div></div><div class="btn-menu relative z-50 -mr-8 flex h-[5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden" role=button aria-label=Menu></div><script>const htmlClass=document.documentElement.classList;setTimeout(()=>{htmlClass.remove("not-ready")},10);const btnMenu=document.querySelector(".btn-menu");btnMenu.addEventListener("click",()=>{htmlClass.toggle("open")});const metaTheme=document.querySelector('meta[name="theme-color"]'),lightBg=`"#faf6f1"`.replace(/"/g,""),setDark=e=>{metaTheme.setAttribute("content",e?"#000":lightBg),htmlClass[e?"add":"remove"]("dark"),localStorage.setItem("dark",e)},darkScheme=window.matchMedia("(prefers-color-scheme: dark)");if(htmlClass.contains("dark"))setDark(!0);else{const e=localStorage.getItem("dark");setDark(e?e==="true":darkScheme.matches)}darkScheme.addEventListener("change",e=>{setDark(e.matches)});const btnDark=document.querySelector(".btn-dark");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem("dark")!=="true")})</script><div class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"><nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-6"><a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/categories/>카테고리</a></nav><nav class="mt-12 flex justify-center space-x-10 dark:invert lg:ml-12 lg:mt-0 lg:items-center lg:space-x-6"><a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./github.svg) href=https://github.com/mingkyme target=_blank rel=me>github</a>
<a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./instagram.svg) href=https://instagram.com/food_mingky target=_blank rel=me>instagram</a></nav></div></header><main class="prose prose-neutral relative mx-auto min-h-[calc(100%-10rem)] max-w-3xl px-8 pb-24 pt-16 dark:prose-invert"><article><header class=mb-20><h1 class="!my-0 pb-2.5">무효화 [Purge] 구현 방법론</h1><div class="text-sm opacity-60"><time>2023. 9. 9.</time></div></header><section><h2 id=purge-종류>Purge 종류</h2><p>Purge는 2가지 종류가 있다.</p><ul><li>Hard Purge</li><li><ul><li>캐시 파일을 강제로 삭제하여, Cache 자체를 없애버린다.</li></ul></li><li>Soft Purge</li><li><ul><li>Cache 의 TTL을 0으로 조정한다. 만료된 것으로 취급하여, Revalidate 또는 Expired 로 나온다.</li></ul></li></ul><p>지금까지 말한 방법은 직접 파일을 수정하거나 삭제하는 방식이므로, wildcard purge가 불가능하다.</p><p>하지만, 대부분 CDN 서비스는 wildcard로 purge를 진행한다.</p><p>어떻게 처리하는 걸까?</p><p>메모리 DB를 따로 둬서 접속하는 URL이 rule에 맞다면 캐시 여부와 상관 없이 bypass 하는 구조도 가능하다.</p><p>단, 이렇게 구현 시, 요청 시간에 대한 정보도 같이 작성하여 1번이라도 renew가 된 정보에 대해서는 여러번 bypass가 되지 않게 해야한다.</p></section><nav class="mt-24 flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]"><a class="flex w-1/2 items-center rounded-l-md p-6 pr-3 no-underline hover:bg-black/[2%] dark:hover:bg-white/[3%]" href=https://blog.mingky.me/post/cdn/2023-09-16/><span class=mr-1.5>←</span><span>X-Forwarded-For Header 사용법</span></a>
<a class="ml-auto flex w-1/2 items-center justify-end rounded-r-md p-6 pl-3 no-underline hover:bg-black/[2%] dark:hover:bg-white/[3%]" href=https://blog.mingky.me/post/cdn/2023-08-16/><span>Random Domain으로 관리되는 이유</span><span class=ml-1.5>→</span></a></nav><div class=mt-24 id=disqus_thread></div><script>const disqusShortname="mingkyme",script=document.createElement("script");script.src="https://"+disqusShortname+".disqus.com/embed.js",script.setAttribute("data-timestamp",+new Date),document.head.appendChild(script)</script></article></main><footer class="opaco mx-auto flex h-[5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60"><div class=mr-auto>&copy; 2023
<a class=link href=https://blog.mingky.me/>MINGKYME 블로그</a></div><a class="link mx-6" href=https://gohugo.io/ rel=noopener target=_blank>Powered by Hugo️️</a>️
<a class=link href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>Theme Paper</a></footer></body></html>