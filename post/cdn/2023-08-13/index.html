<!doctype html><html class="not-ready text-sm lg:text-base" style=--bg:#faf6f1 lang=ko><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>CDN의 구성 - MINGKYME 블로그</title><meta name=theme-color><meta name=description content="개요 CDN은 크게 3가지 요소로 이뤄져있다.
Edge Relay Origin 각각의 요소가 하는 역할을 알아보자.
1. Edge 클라이언트가 접근하는 곳이 Edge 서버이다.
해당 서버에서는 Hot content를 cache 한다.
Edge 서버는 Raound Robin 형식으로 트래픽을 분배한다.
만약, URL을 기준으로 트래픽을 분배한다면 Hot Content를 담당하는 서버는 트래픽을 버티지 못할 것이기 떄문이다.
Edge의 캐시 조건으로는
사용 횟수가 일정 횟수 이상 (proxy_cache_min_uses) 마지막으로 사용된 기간 (expires) 등이 있다.
만약 Cache가 돼 있지 않는다면? Relay로 요청을 넘긴다."><meta name=author content="MINGKYME"><link rel="preload stylesheet" as=style href=https://blog.mingky.me/main.min.css><script defer src=https://blog.mingky.me/highlight.min.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=preload as=image href=https://blog.mingky.me/theme.png><link rel=preload as=image href="https://www.gravatar.com/avatar/dd549fcc49ccfe7970c3f796850bccf7?s=160&amp;d=identicon"><link rel=preload as=image href=https://blog.mingky.me/github.svg><link rel=preload as=image href=https://blog.mingky.me/instagram.svg><link rel=icon href=https://blog.mingky.me/favicon.ico><link rel=apple-touch-icon href=https://blog.mingky.me/apple-touch-icon.png><meta name=generator content="Hugo 0.113.0"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-JXMPBB9GZR","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JXMPBB9GZR"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-JXMPBB9GZR",{anonymize_ip:!1})}</script><meta property="og:title" content="CDN의 구성"><meta property="og:description" content="개요 CDN은 크게 3가지 요소로 이뤄져있다.
Edge Relay Origin 각각의 요소가 하는 역할을 알아보자.
1. Edge 클라이언트가 접근하는 곳이 Edge 서버이다.
해당 서버에서는 Hot content를 cache 한다.
Edge 서버는 Raound Robin 형식으로 트래픽을 분배한다.
만약, URL을 기준으로 트래픽을 분배한다면 Hot Content를 담당하는 서버는 트래픽을 버티지 못할 것이기 떄문이다.
Edge의 캐시 조건으로는
사용 횟수가 일정 횟수 이상 (proxy_cache_min_uses) 마지막으로 사용된 기간 (expires) 등이 있다.
만약 Cache가 돼 있지 않는다면? Relay로 요청을 넘긴다."><meta property="og:type" content="article"><meta property="og:url" content="https://blog.mingky.me/post/cdn/2023-08-13/"><meta property="article:section" content="post"><meta property="article:published_time" content="2023-08-13T14:57:45+00:00"><meta property="article:modified_time" content="2023-08-13T14:57:45+00:00"><meta itemprop=name content="CDN의 구성"><meta itemprop=description content="개요 CDN은 크게 3가지 요소로 이뤄져있다.
Edge Relay Origin 각각의 요소가 하는 역할을 알아보자.
1. Edge 클라이언트가 접근하는 곳이 Edge 서버이다.
해당 서버에서는 Hot content를 cache 한다.
Edge 서버는 Raound Robin 형식으로 트래픽을 분배한다.
만약, URL을 기준으로 트래픽을 분배한다면 Hot Content를 담당하는 서버는 트래픽을 버티지 못할 것이기 떄문이다.
Edge의 캐시 조건으로는
사용 횟수가 일정 횟수 이상 (proxy_cache_min_uses) 마지막으로 사용된 기간 (expires) 등이 있다.
만약 Cache가 돼 있지 않는다면? Relay로 요청을 넘긴다."><meta itemprop=datePublished content="2023-08-13T14:57:45+00:00"><meta itemprop=dateModified content="2023-08-13T14:57:45+00:00"><meta itemprop=wordCount content="176"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="CDN의 구성"><meta name=twitter:description content="개요 CDN은 크게 3가지 요소로 이뤄져있다.
Edge Relay Origin 각각의 요소가 하는 역할을 알아보자.
1. Edge 클라이언트가 접근하는 곳이 Edge 서버이다.
해당 서버에서는 Hot content를 cache 한다.
Edge 서버는 Raound Robin 형식으로 트래픽을 분배한다.
만약, URL을 기준으로 트래픽을 분배한다면 Hot Content를 담당하는 서버는 트래픽을 버티지 못할 것이기 떄문이다.
Edge의 캐시 조건으로는
사용 횟수가 일정 횟수 이상 (proxy_cache_min_uses) 마지막으로 사용된 기간 (expires) 등이 있다.
만약 Cache가 돼 있지 않는다면? Relay로 요청을 넘긴다."><script>(function(){var t,e=window;if(e.ChannelIO)return e.console.error("ChannelIO script included twice.");t=function(){t.c(arguments)},t.q=[],t.c=function(e){t.q.push(e)},e.ChannelIO=t;function n(){if(e.ChannelIOInitialized)return;e.ChannelIOInitialized=!0;var n,t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://cdn.channel.io/plugin/ch-plugin-web.js",n=document.getElementsByTagName("script")[0],n.parentNode&&n.parentNode.insertBefore(t,n)}document.readyState==="complete"?n():(e.addEventListener("DOMContentLoaded",n),e.addEventListener("load",n))})(),ChannelIO("boot",{pluginKey:"255599eb-3a0f-411d-8537-e5ecb986b3bb"})</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5510947922469629" crossorigin=anonymous></script></head><body class="text-black duration-200 ease-out dark:text-white"><header class="mx-auto flex h-[5rem] max-w-3xl px-8 lg:justify-center"><div class="relative z-50 mr-auto flex items-center"><a class="-translate-x-[1px] -translate-y-[1px] text-2xl font-semibold" href=https://blog.mingky.me/>MINGKYME 블로그</a><div class="btn-dark text-[0] ml-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.svg)_left_center/cover_no-repeat] dark:invert dark:[background-position:right]" role=button aria-label=Dark></div></div><div class="btn-menu relative z-50 -mr-8 flex h-[5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden" role=button aria-label=Menu></div><script>const htmlClass=document.documentElement.classList;setTimeout(()=>{htmlClass.remove("not-ready")},10);const btnMenu=document.querySelector(".btn-menu");btnMenu.addEventListener("click",()=>{htmlClass.toggle("open")});const metaTheme=document.querySelector('meta[name="theme-color"]'),lightBg=`"#faf6f1"`.replace(/"/g,""),setDark=e=>{metaTheme.setAttribute("content",e?"#000":lightBg),htmlClass[e?"add":"remove"]("dark"),localStorage.setItem("dark",e)},darkScheme=window.matchMedia("(prefers-color-scheme: dark)");if(htmlClass.contains("dark"))setDark(!0);else{const e=localStorage.getItem("dark");setDark(e?e==="true":darkScheme.matches)}darkScheme.addEventListener("change",e=>{setDark(e.matches)});const btnDark=document.querySelector(".btn-dark");btnDark.addEventListener("click",()=>{setDark(localStorage.getItem("dark")!=="true")})</script><div class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"><nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-6"><a class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal" href=/categories/>카테고리</a></nav><nav class="mt-12 flex justify-center space-x-10 dark:invert lg:ml-12 lg:mt-0 lg:items-center lg:space-x-6"><a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./github.svg) href=https://github.com/mingkyme target=_blank rel=me>github</a>
<a class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6" style=--url:url(./instagram.svg) href=https://instagram.com/food_mingky target=_blank rel=me>instagram</a></nav></div></header><main class="prose prose-neutral relative mx-auto min-h-[calc(100%-10rem)] max-w-3xl px-8 pb-24 pt-16 dark:prose-invert"><article><header class=mb-20><h1 class="!my-0 pb-2.5">CDN의 구성</h1><div class="text-sm opacity-60"><time>2023. 8. 13.</time></div></header><section><h2 id=개요>개요</h2><p>CDN은 크게 3가지 요소로 이뤄져있다.</p><ol><li>Edge</li><li>Relay</li><li>Origin</li></ol><p>각각의 요소가 하는 역할을 알아보자.</p><h2 id=1-edge>1. Edge</h2><p>클라이언트가 접근하는 곳이 Edge 서버이다.</p><p>해당 서버에서는 Hot content를 cache 한다.</p><p>Edge 서버는 Raound Robin 형식으로 트래픽을 분배한다.</p><p>만약, URL을 기준으로 트래픽을 분배한다면 Hot Content를 담당하는 서버는 트래픽을 버티지 못할 것이기 떄문이다.</p><p>Edge의 캐시 조건으로는</p><ul><li>사용 횟수가 일정 횟수 이상 (proxy_cache_min_uses)</li><li>마지막으로 사용된 기간 (expires)</li></ul><p>등이 있다.</p><p>만약 Cache가 돼 있지 않는다면? Relay로 요청을 넘긴다.</p><h2 id=2-relay>2. Relay</h2><p>Relay 서버는 Edge 서버가 접속하는 서버이다.</p><p>Relay는 분배 방식이 URL 기반으로 hash를 가진다.</p><p>해당 부분은 트래픽 분산의 목적보다 cache 저장 효율을 높이기 위해 분배 방식이 다르다.</p><p>Cold Contents를 Cache 한다.</p><p>대체로 min_uses는 짧고, expries는 길다. (Origin 서버의 부담을 줄이기 위해)</p><p>Relay 서버에서 컨텐츠가 Cache 돼 있지 않는다면? Origin으로 요청을 넘긴다.</p><h2 id=3-origin>3. Origin</h2><p>해당 서버는 원본 자료가 있는 서버이다.</p><p>CDN 사의 Origin 서버를 사용할 수 도 있지만, 사용자가 EC2 등의 서버를 이용하여 Origin으로 사용할 수 있다.</p><p>CDN 사의 서비스를 이용하는 경우 CDN Origin을 이용하게 된다.</p><ul><li>S3 등 스토리지 서비스</li></ul><p>Origin 서버는 많은 트래픽을 견딜 수 없으므로, Origin의 요청을 적게 보내는게 목표라고 볼 수 있다.</p></section><nav class="mt-24 flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]"><a class="ml-auto flex w-1/2 items-center justify-end rounded-r-md p-6 pl-3 no-underline hover:bg-black/[2%] dark:hover:bg-white/[3%]" href=https://blog.mingky.me/post/nginx/2023-08-12/><span>nginx 에서 SSL 인증서를 여러개 설정하는 방법</span><span class=ml-1.5>→</span></a></nav><div class=mt-24 id=disqus_thread></div><script>const disqusShortname="mingkyme",script=document.createElement("script");script.src="https://"+disqusShortname+".disqus.com/embed.js",script.setAttribute("data-timestamp",+new Date),document.head.appendChild(script)</script></article></main><footer class="opaco mx-auto flex h-[5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60"><div class=mr-auto>&copy; 2023
<a class=link href=https://blog.mingky.me/>MINGKYME 블로그</a></div><a class="link mx-6" href=https://gohugo.io/ rel=noopener target=_blank>Powered by Hugo️️</a>️
<a class=link href=https://github.com/nanxiaobei/hugo-paper rel=noopener target=_blank>Theme Paper</a></footer></body></html>